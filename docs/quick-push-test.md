# Быстрый тест Push-уведомлений в Expo Go

## Проблема
Push-уведомления не приходят в Expo Go, хотя сервер их отправляет.

## Быстрое решение

### 1. Проверьте инициализацию
```bash
# В приложении Expo Go
1. Авторизуйтесь как client1@example.com
2. Профиль → Тест Push-уведомлений
3. Нажмите "Принудительная инициализация"
4. Проверьте статус: "Инициализированы: Да"
```

### 2. Проверьте токены
```bash
# В тестовом экране
1. Нажмите "Обновить токен на сервере"
2. Проверьте "Есть токен: Да"
3. Запомните префикс токена
```

### 3. Тестовая отправка
```bash
# В тестовом экране
1. Нажмите "Отправить тестовое уведомление"
2. Проверьте, приходит ли уведомление
```

### 4. Проверка через сервер
```bash
# В терминале сервера
cd server
node test-expo-go-notifications.js
```

## Если уведомления не приходят

### Проверьте permissions
1. Настройки устройства → Expo Go → Уведомления → ВКЛ
2. Перезапустите приложение

### Проверьте токены в БД
```bash
# В терминале сервера
node -e "
const { PrismaClient } = require('@prisma/client');
const prisma = new PrismaClient();
prisma.userPushToken.findMany({
  where: { isActive: true },
  include: { user: { select: { email: true } } }
}).then(tokens => {
  console.log('Токены в БД:', tokens.map(t => ({
    email: t.user.email,
    token: t.token.substring(0, 30) + '...',
    platform: t.platform
  })));
  prisma.\$disconnect();
});
"
```

### Проверьте логи сервера
```bash
# В терминале сервера
tail -f logs/app.log | grep "push"
```

## Альтернативное тестирование

Если Expo Go не работает:
1. Соберите preview build: `eas build --profile preview`
2. Установите на устройство
3. Протестируйте push-уведомления

## Контакты
Если проблема не решается, соберите:
- Логи клиента (консоль Expo Go)
- Логи сервера
- Статус токенов из БД 