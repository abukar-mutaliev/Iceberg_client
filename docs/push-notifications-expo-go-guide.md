# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Expo Go

## –ü—Ä–æ–±–ª–µ–º–∞
Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ Expo Go –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, —Ö–æ—Ç—è —Å–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö —É—Å–ø–µ—à–Ω–æ.

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Expo Go**
2. **–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –∫–∞–∫ –∫–ª–∏–µ–Ω—Ç** (client1@example.com)
3. **–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω**: –ü—Ä–æ—Ñ–∏–ª—å ‚Üí –¢–µ—Å—Ç Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å**:
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã: –î–∞
   - –ï—Å—Ç—å —Ç–æ–∫–µ–Ω: –î–∞
   - –¢–∏–ø —Ç–æ–∫–µ–Ω–∞: Expo
   - –¢–∏–ø —Å–±–æ—Ä–∫–∏: Development (–¥–ª—è Expo Go)
   - Standalone: –ù–µ—Ç

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

```bash
# –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å–µ—Ä–≤–µ—Ä–∞
cd server
node test-expo-go-notifications.js
```

–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç –≤—Å–µ —Ç–æ–∫–µ–Ω—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å.

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
2025-07-14 10:47:21 info: === –ù–ê–ß–ê–õ–û sendPushNotificationsToClients ===
2025-07-14 10:47:21 info: –ù–∞–π–¥–µ–Ω—ã push-—Ç–æ–∫–µ–Ω—ã –≤ –ë–î
2025-07-14 10:47:21 info: –ü—Ä–∏–Ω–∏–º–∞–µ–º —Ç–æ–∫–µ–Ω –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–¥–ª–∏–Ω–∞ > 50)
2025-07-14 10:47:21 info: –û–±–Ω–∞—Ä—É–∂–µ–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Ç–æ–∫–µ–Ω - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
2025-07-14 10:47:21 info: Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ Expo Go

**–ü—Ä–æ–±–ª–µ–º–∞**: –í Expo Go –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ development build, –Ω–æ –∫–æ–¥ –ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å FCM —Ç–æ–∫–µ–Ω—ã.

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ `PushNotificationService.js`:
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `isExpoGo`
- –î–ª—è Expo Go –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è Expo push —Ç–æ–∫–µ–Ω—ã, –∞ –Ω–µ FCM
- –£–±—Ä–∞–Ω –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ FCM —Ç–æ–∫–µ–Ω—ã

### 2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã

**–ü—Ä–æ–±–ª–µ–º–∞**: –¢–æ–∫–µ–Ω—ã –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º–∏ –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞.

**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ React Native Debugger
console.log('Push token:', PushNotificationService.expoPushToken);
```

### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å permissions

**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
2. –ù–∞–π–¥–∏—Ç–µ Expo Go
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–∫–ª—é—á–µ–Ω—ã

### 4. –ü—Ä–æ–±–ª–µ–º—ã —Å projectId

**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏
console.log('Project ID:', Constants.expoConfig?.extra?.eas?.projectId);
```

## –ü–æ—à–∞–≥–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Expo Go
2. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –∫–∞–∫ client1@example.com
3. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω
4. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è"
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤

1. –í —Ç–µ—Å—Ç–æ–≤–æ–º —ç–∫—Ä–∞–Ω–µ –Ω–∞–∂–º–∏—Ç–µ "–û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ"
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### –®–∞–≥ 3: –¢–µ—Å—Ç–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞

1. –í —Ç–µ—Å—Ç–æ–≤–æ–º —ç–∫—Ä–∞–Ω–µ –Ω–∞–∂–º–∏—Ç–µ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ"
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –ø—Ä–∏—Ö–æ–¥–∏—Ç –ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
3. –ï—Å–ª–∏ –Ω–µ—Ç - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

### –®–∞–≥ 4: –¢–µ—Å—Ç —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Å–∫—Ä–∏–ø—Ç

```bash
cd server
node test-expo-go-notifications.js
```

### –®–∞–≥ 5: –°–æ–∑–¥–∞–Ω–∏–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

1. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –∫–∞–∫ –≤–æ–¥–∏—Ç–µ–ª—å
2. –°–æ–∑–¥–∞–π—Ç–µ –æ—Å—Ç–∞–Ω–æ–≤–∫—É –≤ —Ä–∞–π–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –ø—Ä–∏—Ö–æ–¥–∏—Ç –ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É

## –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏ –∫–ª–∏–µ–Ω—Ç–∞

–í–∫–ª—é—á–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –≤ `PushNotificationService.js`:
```javascript
console.log('üîç Build type check:', { isStandalone, isExpoGo, __DEV__ });
console.log('üé´ Expo push token obtained:', token?.substring(0, 50) + '...');
```

### –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
```bash
tail -f server/logs/app.log | grep "push"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –±–∞–∑–µ

```sql
SELECT 
    u.email,
    u.role,
    pt.token,
    pt.platform,
    pt.isActive,
    pt.createdAt
FROM "UserPushToken" pt
JOIN "User" u ON pt.userId = u.id
WHERE pt.isActive = true
ORDER BY pt.createdAt DESC;
```

## –†–µ—à–µ–Ω–∏—è

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

–ï—Å–ª–∏ —Ç–æ–∫–µ–Ω—ã –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è:
1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ permissions
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ (–Ω–µ —ç–º—É–ª—è—Ç–æ—Ä)

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏

–ï—Å–ª–∏ —Ç–æ–∫–µ–Ω—ã –µ—Å—Ç—å, –Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ EXPO_ACCESS_TOKEN
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω—ã –≤–∞–ª–∏–¥–Ω—ã–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ

### 3. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ï—Å–ª–∏ Expo Go –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –°–æ–±–µ—Ä–∏—Ç–µ preview build
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ FCM —Ç–æ–∫–µ–Ω—ã

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è:
1. –°–æ–±–µ—Ä–∏—Ç–µ –ª–æ–≥–∏ –∫–ª–∏–µ–Ω—Ç–∞ –∏ —Å–µ—Ä–≤–µ—Ä–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å Expo services
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ EXPO_ACCESS_TOKEN –∞–∫—Ç—É–∞–ª—å–Ω—ã–π 