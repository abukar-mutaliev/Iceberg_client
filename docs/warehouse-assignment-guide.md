# Руководство по системе назначения складов

## Обзор

Система автоматического назначения складов позволяет сотрудникам принимать заказы из соседних районов, когда товары недоступны на складе района клиента.

## Новая функциональность

### Для сотрудников

#### 1. Просмотр доступных заказов
- Включите фильтр "Можно принять" для отображения заказов, которые можно принять к обработке
- Включите фильтр "Соседние районы" для отображения всех заказов из соседних районов

#### 2. Принятие заказа
1. Найдите заказ с иконкой "Принять" (зеленая кнопка)
2. Нажмите кнопку "Принять"
3. В модальном окне подтвердите принятие заказа
4. Заказ будет перенаправлен на ваш склад

#### 3. Обработка принятого заказа
- Принятый заказ появится в списке ваших заказов
- Обрабатывайте его как обычный заказ
- Доставка будет осуществляться из вашего склада

### Визуальные индикаторы

#### В карточке заказа
- **Оранжевое предупреждение**: "Заказ из соседнего района"
- **Зеленая кнопка "Принять"**: Доступно для заказов, которые можно принять
- **Информация о районе клиента**: Показывает исходный район заказа

#### В фильтрах
- **Можно принять**: Фильтр для заказов доступных для принятия
- **Соседние районы**: Включает заказы из близлежащих районов
- **Срочные**: Приоритетные заказы (включая заказы со скоро истекающей датой доставки)

### API Endpoints (для разработчиков)

#### Новые endpoints
```
GET /api/orders?includeNearbyDistricts=true&availableForPickup=true
PATCH /api/orders/:id/pickup
GET /api/orders/available-for-pickup
```

#### Параметры запроса
- `includeNearbyDistricts`: включить заказы из соседних районов
- `availableForPickup`: только заказы доступные для принятия
- `newWarehouseId`: ID склада для перенаправления заказа

### Логика системы

#### Автоматическое назначение
1. При создании заказа система проверяет наличие товаров на складе района клиента
2. Если товаров недостаточно, заказ помечается как доступный для принятия
3. Сотрудники соседних складов могут увидеть и принять такой заказ

#### Приоритеты районов (Ингушетия)
```
Назран → Малгобек → Пригородный → Сунжа → Джейрах
Малгобек → Назран → Пригородный → Сунжа → Джейрах  
Пригородный → Назран → Малгобек → Сунжа → Джейрах
Сунжа → Пригородный → Назран → Малгобек → Джейрах
Джейрах → Пригородный → Сунжа → Назран → Малгобек
```

### Уведомления

Система автоматически отправляет уведомления:
- ✅ "Заказ успешно принят для обработки"
- ❌ "Ошибка при принятии заказа"
- ℹ️ "Заказ перенаправлен на ваш склад"

### Права доступа

- **Сотрудники**: Могут принимать заказы из соседних районов
- **Администраторы**: Полный доступ ко всем функциям
- **Клиенты**: Видят только свои заказы

### Советы по использованию

1. **Регулярно проверяйте фильтр "Можно принять"** для новых доступных заказов
2. **Принимайте срочные заказы в первую очередь** (фильтр "Срочные")
3. **Обращайте внимание на район клиента** при планировании доставки
4. **Используйте поиск** для быстрого поиска конкретных заказов

### Техническая поддержка

При возникновении проблем:
1. Проверьте подключение к интернету
2. Обновите приложение до последней версии
3. Обратитесь к администратору системы 